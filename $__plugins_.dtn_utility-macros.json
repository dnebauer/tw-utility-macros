{
    "title": "$:/plugins/.dtn/utility-macros",
    "author": "David Nebauer",
    "core-version": ">=5.1.21",
    "dependents": "",
    "description": "Utility macros used by David Nebauer",
    "list": "readme credits license",
    "plugin-type": "plugin",
    "source": "https://github.com/dnebauer/tw-utility-macros",
    "version": "0.0.2",
    "type": "application/json",
    "text": "{\n    \"tiddlers\": {\n        \"$:/plugins/.dtn/utility-macros\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros\",\n            \"author\": \"David Nebauer\",\n            \"core-version\": \">=5.1.21\",\n            \"dependents\": \"\",\n            \"description\": \"Utility macros used by David Nebauer\",\n            \"list\": \"readme credits license\",\n            \"plugin-type\": \"plugin\",\n            \"source\": \"https://github.com/dnebauer/tw-utility-macros\",\n            \"version\": \"0.0.2\"\n        },\n        \"$:/plugins/.dtn/utility-macros/check-var-or-macro\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/check-var-or-macro\",\n            \"created\": \"20190406070252330\",\n            \"modified\": \"20200921110603111\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define check-var-or-macro(var)\\n<$list filter=\\\"[[$var$]] +[is[variable]]\\\" emptyMessage=\\\"Undefined variable or macro '$var$'\\\">\\n<<emptyNonExistentMessage>>\\n</$list>\\n\\\\end\"\n        },\n        \"$:/plugins/.dtn/utility-macros/credits\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/credits\",\n            \"created\": \"20200921131708992\",\n            \"modified\": \"20200921132751275\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"The javascript module providing the \\\"number-format\\\" macro is based on a post by Eric Shulman to tiddlywiki google group (see [[https://groups.google.com/g/tiddlywiki/c/avkbQnEd1UI/m/_sz6sEeFBwAJ]]).\\n\\nI regret that any antecedents to the other macros in this collection have long receded into the mists of memory. I apologise to anyone whose work I have failed to acknowledge -- please let me know and I will do my best to rectify the omission.\"\n        },\n        \"$:/plugins/.dtn/utility-macros/home-path-link/config\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/home-path-link/config\",\n            \"created\": \"20190407071836376\",\n            \"local-url\": \"file:///home/david\",\n            \"modified\": \"20200921110339534\",\n            \"tags\": \"Value\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"/home/david\"\n        },\n        \"$:/plugins/.dtn/utility-macros/home-path-link/macros\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/home-path-link/macros\",\n            \"created\": \"20190407071638782\",\n            \"modified\": \"20200921110339524\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define home-path-link-helper-url() $(home-root-url)$/$(home-rel-path)$\\n\\\\define home-path-link-helper-path() $HOME/$(home-rel-path)$\\n\\\\define home-path-link(path)\\n<$vars home-root-url={{$:/plugins/.dtn/utility-macros/home-path-link/config!!local-url}} home-rel-path=<<__path__>> ><$macrocall $name=\\\".dlink-ex\\\" to=<<home-path-link-helper-url>> _=<<home-path-link-helper-path>>/></$vars>\\n\\\\end\"\n        },\n        \"$:/plugins/.dtn/utility-macros/js/NumberFormat.js\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/js/NumberFormat.js\",\n            \"text\": \"/*\\\\\\ntitle: NumberFormat.js\\ntype: application/javascript\\nmodule-type: macro\\n\\nReturns a formatted number.\\n\\nIntl.NumberFormat specification:\\n[from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat]\\n* style: formatting style to use\\n  - \\\"decimal\\\" for plain number formatting (default)\\n  - \\\"currency\\\" for currency formatting\\n  - \\\"percent\\\" for percent formatting\\n  - \\\"unit\\\" for unit formatting\\n* currency: required if style = 'currency' (no default)\\n  - for allowed values see\\n    http://www.currency-iso.org/en/home/tables/table-a1.html\\n* compactDisplay: used when notation = 'compact'\\n  - \\\"short\\\" is not explained (default)\\n  - \\\"long\\\" is not explained\\n* currencyDisplay: how to display the currency\\n  - \\\"symbol\\\" to use a localized currency symbol such as â‚¬ (default)\\n  - \\\"narrowSymbol\\\" to use narrow format symbol -- \\\"$100\\\", not \\\"US$100\\\"\\n  - \\\"code\\\" to use the ISO currency code\\n  - \\\"name\\\" to use a localized currency name such as \\\"dollar\\\"\\n* currencySign: how to signify a negative amount\\n  - \\\"standard\\\" to use minus sign (default)\\n  - \\\"accounting\\\" to use locale's accounting practice, e.g., parentheses\\n* localeMatcher: locale matching algorithm to use\\n  - \\\"best fit\\\" is not explained (default)\\n  - \\\"lookup\\\" is not explained\\n* notation: formatting that should be displayed for the number\\n  - \\\"standard\\\" is plain number formatting (default)\\n  - \\\"scientific\\\" returns the order-of-magnitude for formatted number\\n  - \\\"engineering\\\" returns the exponent of ten when divisible by three\\n  - \\\"compact\\\" string representing exponent, see compactDisplay\\n* numberingSystem: numbering system (no default specified)\\n  - possible values include: \\\"arab\\\", \\\"arabext\\\", \\\" bali\\\", \\\"beng\\\", \\\"deva\\\",\\n    \\\"fullwide\\\", \\\" gujr\\\", \\\"guru\\\", \\\"hanidec\\\", \\\"khmr\\\", \\\" knda\\\", \\\"laoo\\\",\\n    \\\"latn\\\", \\\"limb\\\", \\\"mlym\\\", \\\" mong\\\", \\\"mymr\\\", \\\"orya\\\", \\\"tamldec\\\", \\\"telu\\\",\\n    \\\"thai\\\", \\\"tibt\\\"\\n* signDisplay: when to display the sign for the number\\n  - \\\"auto\\\" is display for negative numbers only (default)\\n  - \\\"never\\\" is never displaying sign\\n  - \\\"always\\\" is always displaying sign\\n  - \\\"exceptZero\\\" is displaying for positive and negative, but not zero\\n* unit: unit to use if style = 'unit' (no default)\\n  - for allowed values see\\n    https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier\\n* unitDisplay: unit formatting style\\n  - \\\"short\\\" e.g., 16 l (default)\\n  - \\\"long\\\" e.g., 16 litres\\n  - \\\"narrow\\\" e.g., 16l\\n* useGrouping: whether to use grouping (e.g., thousands) separators\\n  - true (default)\\n  - false\\n* minimumIntegerDigits: minimum number of integer digits to use\\n  - allowed = 1 to 21\\n  - default = 1\\n  - see Note\\n* minimumFractionDigits: minimum number of fraction digits to use\\n  - allowed = 0 to 20\\n  - default for plain number and percent formatting = 0\\n  - default for currency formatting depends on currency\\n  - see Note\\n* maximumFractionDigits: maximum number of fraction digits to use\\n  - allowed = 0 to 20\\n  - default for plain number formatting is the larger of\\n    minimumFractionDigits and 3\\n  - default for currency formatting is the larger of\\n    minimumFractionDigits and currecy-specific value\\n  - default for percent formatting is the larger of\\n    minimumFractionDigits and 0\\n  - see Note\\n* minimumSignificantDigits: minimum number of significant digits to use\\n  - allowed = 1 to 21\\n  - default = 1\\n  - see Note\\n* maximumSignificantDigits: maximum number of significant digits to use\\n  - allowed = 1 to 21\\n  - default = 21\\nNote: first three 'min-max' properties are ignored if one of the\\n      last two 'min-max' properties are defined\\n\\nFunction parameters:\\n* value: [number to be formatted, no default]\\n* country: \\\"en-AU\\\"\\n* style: \\\"decimal\\\"\\n* currency: \\\"AUD\\\"\\n* compactDisplay: \\\"short\\\"\\n* currencyDisplay: \\\"symbol\\\"\\n* currencySign: \\\"standard\\\"\\n* localeMatcher: \\\"best fit\\\"\\n* notation: \\\"standard\\\"\\n* signDisplay: \\\"auto\\\"\\n* unit: null\\n* unitDisplay: \\\"short\\\"\\n* useGrouping: true\\n\\nWarning: mapping Intl.Numberformat properties other than \\\"country\\\", \\n         \\\"style\\\" and \\\"currency\\\" to macro parameters results in runtime\\n         \\\"uncaught reference\\\" errors, so they are not currently\\n         implemented. (They are commented out in the javascript below.)\\n\\n\\\\*/\\n(function(){\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\nexports.name   = \\\"number-format\\\";\\nexports.params = [\\n    { name: \\\"value\\\" }, { name: \\\"country\\\" },\\n    { name: \\\"style\\\" }, { name: \\\"currency\\\" },\\n  /*{ name: \\\"compactDisplay\\\" }, { name: \\\"currencyDisplay\\\" },\\n    { name: \\\"currencySign\\\" }, { name: \\\"localeMatcher\\\" },\\n    { name: \\\"notation\\\" }, { name: \\\"signDisplay\\\" },\\n    { name: \\\"unit\\\" }, { name: \\\"unitDisplay\\\" },\\n    { name: \\\"useGrouping\\\" }*/\\n];\\nexports.run = function(value,country,style,currency) {\\n    return Intl.NumberFormat(\\n        country||\\\"en-AU\\\", {\\n            style:style||\\\"decimal\\\",\\n            currency:currency||\\\"AUD\\\",\\n          /*compactDisplay:compactDisplay||\\\"short\\\",\\n            currencyDisplay:currencyDisplay||\\\"symbol\\\",\\n            currencySign:currencySign||\\\"standard\\\",\\n            localeMatcher:localeMatcher||\\\"best fit\\\",\\n            notation:notation||\\\"standard\\\",\\n            signDisplay:signDisplay||\\\"auto\\\",\\n            unit:unit||null,\\n            unitDisplay:unitDisplay||\\\"short\\\",\\n            useGrouping:useGrouping||true*/\\n        }\\n    ).format(value);\\n};\\n})();\\n\",\n            \"type\": \"application/javascript\",\n            \"module-type\": \"macro\",\n            \"created\": \"20200921110701750\",\n            \"modified\": \"20200921123259707\",\n            \"tags\": \"\"\n        },\n        \"$:/plugins/.dtn/utility-macros/license\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/license\",\n            \"created\": \"20200921131655518\",\n            \"modified\": \"20200921132659023\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"This plugin is distributed under the same license as Tiddlywiki, the [[3-Clause BSD License|https://opensource.org/licenses/BSD-3-Clause]] (also known as //BSD-3-Clause//, the //New BSD License//, and the //Modified BSD License//):\\n\\n---\\n\\nCopyright 2020 David Nebauer\\n\\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\\n\\n# Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\\n\\n# Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\\n\\n# Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\\n\\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \\\\\\\"AS IS\\\\\\\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\"\n        },\n        \"$:/plugins/.dtn/utility-macros/list-item-space\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/list-item-space\",\n            \"created\": \"20190325135849571\",\n            \"modified\": \"20200921110433576\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define list-item-space()\\n<div>&nbsp;</div>\\n\\\\end\"\n        },\n        \"$:/plugins/.dtn/utility-macros/readme\": {\n            \"title\": \"$:/plugins/.dtn/utility-macros/readme\",\n            \"created\": \"20200921131642265\",\n            \"modified\": \"20200921140907972\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"This plugin provides the following macros:\\n\\n* check-var-or-macro -- check whether macro-or variable exists\\n* home-path-link -- display hyperlink to a path in user's home directory\\n* list-item-space -- add vertical space after a list item\\n* number-format -- format a number.\\n\\nDetails of each macro are given below.\\n\\n---\\n\\n! check-var-or-macro(var)\\n\\n!! Use\\n\\nTest for the existence of a variable or macro, and displays an error message if it is not. It is intended to be used at the top of a tiddler that uses a custom macro to inform the user if the macro is not available.\\n\\n!! Requirements\\n\\nTiddlywiki 5.1.20 or greater as it uses the `[is[variable]]` subfilter operator introduced in that version.\\n\\n!! Parameters\\n\\n; var\\n\\n: name of the variable or macro to check for the existence of\\n\\n!! Returns\\n\\nNothing if the variable or macros exists.\\n\\nThe following message if the variable or macros does not exist:\\n\\n> Undefined variable or macro 'NAME'\\n\\n!! Tiddlers\\n\\n* [[$:/plugins/.dtn/utility-macros/check-var-or-macro]]: macro definition.\\n\\n---\\n\\n! home-path-link(path)\\n\\n!! Use\\n\\nDisplay a hyperlink to a path in a user's home directory in which:\\n\\n* The link text represents the home directory as $HOME to give the link some generality, but\\n* The link itself uses the actual $HOME directory in its path, and\\n* The single parameter provided to the macro is the path relative to the home directory (do not include a leading slash).\\n\\nThe user's home directory must be specified in the //text// and //local-url// fields of [[$:/plugins/.dtn/utility-macros/home-path-link/config]].\\n\\n!! Requirements\\n\\nThe core macro `.dlink-ex` is used to generate the link.\\n\\n!! Parameters\\n\\n; path\\n\\n: path of file relative to user's home directory (with no leading slash)\\n\\n!! Returns\\n\\nA formatted hyperlink in which the home directory is replaced in the link text by `$HOME`.\\n\\n!! Example\\n\\nSuppose the acme program has a configuration file called `.acmerc` in the user's home directory.\\n\\nThe macro call:\\n\\n```\\n<<home-path-link \\\".acmerc\\\">>\\n```\\n\\nresults in:\\n\\n```html\\n<a class=\\\"tc-tiddlylink-external\\\" href=\\\"file:///home/abraham/.acmerc\\\" rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\"><dfn class=\\\"doc-def\\\">$HOME/.acmerc</dfn></a>\\n```\\n\\n!! Tiddlers\\n\\n* [[$:/plugins/.dtn/utility-macros/home-path-link/macros]]: define macros\\n* [[$:/plugins/.dtn/utility-macros/home-path-link/config]]: configure user's home directory:\\n** The path, e.g., `/home/abraham`, is defined in the tiddler body\\n** The corresponding url, e.g., `file:///home/abraham`, is defined in tiddler    field //local-url//.\\n\\n---\\n\\n! list-item-space()\\n\\n!! Use\\n\\nInsert an empty `div` element:\\n\\n```html\\n<div>&nbsp;</div>\\n```\\n\\nUsed for achieving balanced lists where some items are followed by multi-paragraph content wrapped in a div. This macro can be used to ensure visually consistent inter-item space is added to items which are not followed by additional content.\\n\\n!! Requirements\\n\\nNil.\\n\\n!! Parameters\\n\\nNil.\\n\\n!! Returns\\n\\nAn empty div as decribed above.\\n\\n!! Example\\n\\n```\\n* A list item which needs an extra line to follow it<<list-item-space>>\\n```\\n\\n!! Tiddlers\\n\\n* [[$:/plugins/.dtn/utility-macros/list-item-space]]: macro definition.\\n\\n---\\n\\n! number-format(value, [...])\\n\\n!! Use\\n\\nFormat a number.\\n\\n!! Requirements\\n\\nUses the Intl.~NumberFormat javascript function.\\n\\n!! Parameters\\n\\nThe most used parameters are //value// and //style//, followed by //country// and //currency//.<!-- The remaining parameters are used less frequently.--> There are additional properties of the Intl.~NumberFormat function that could be mapped as parameters, but doing so results in \\\"uncaught reference\\\" errors.\\n\\n; value\\n\\n: number to be formatted\\n\\n; style\\n\\n: formatting style to use: //decimal// for plain number formatting (default), //currency// for currency formatting, //percent// for percent formatting, //unit// for unit formatting\\n\\n; country\\n\\n: a [[unicode BCP 47 locale identifier|https://www.unicode.org/reports/tr35/tr35.html#BCP_47_Conformance]], the easiest type of which is a country language code, default = \\\"en-AU\\\"\\n\\n; currency\\n\\n: required if style = 'currency', use an [[ISO-defined currency code|http://www.currency-iso.org/en/home/tables/table-a1.html]], default = \\\"AUD\\\"\\n\\n<!--; compactDisplay\\n\\n: used when notation = 'compact': //short// is not explained (default), //long// is not explained\\n\\n; currencyDisplay\\n\\n: how to display the currency: //symbol// to use a localized currency symbol such as $ (default), //narrowSymbol// to use narrow format symbol, e.g., \\\"$100\\\" rather than \\\"US$100\\\", //code// to use the ISO currency code, //name// to use a localized currency name such as \\\"dollar\\\"\\n\\n; currencySign\\n\\n: how to signify a negative amount: //standard// to use minus sign (default), //accounting// to use locale's accounting practice, e.g., parentheses\\n\\n; localeMatcher\\n\\n: locale matching algorithm to use: //best fit// is not explained (default), //lookup// is not explained\\n\\n; notation\\n\\n: formatting that should be displayed for the number: //standard// is plain number formatting (default), //scientific// returns the order-of-magnitude for formatted number, //engineering// returns the exponent of ten when divisible by three, //compact// string representing exponent, see compactDisplay\\n\\n; numberingSystem\\n\\n: numbering system: no default, possible values include: \\\"arab\\\", \\\"arabext\\\", \\\" bali\\\", \\\"beng\\\", \\\"deva\\\", \\\"fullwide\\\", \\\" gujr\\\", \\\"guru\\\", \\\"hanidec\\\", \\\"khmr\\\", \\\" knda\\\", \\\"laoo\\\", \\\"latn\\\", \\\"limb\\\", \\\"mlym\\\", \\\" mong\\\", \\\"mymr\\\", \\\"orya\\\", \\\"tamldec\\\", \\\"telu\\\", \\\"thai\\\", \\\"tibt\\\"\\n\\n; signDisplay\\n\\n: when to display the sign for the number: //auto// to display for negative numbers only (default), //never// to never display sign, //always// to always display sign, //exceptZero// to display for positive and negative values but not zero\\n\\n; unit\\n\\n: unit to use if style = 'unit': no default, [[allowed values|https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier]]\\n\\n; unitDisplay\\n\\n: unit formatting style: //short//, e.g., 16 l (default), //long//, e.g., 16 litres, //narrow//, e.g., 16l\\n\\n; useGrouping\\n\\n: whether to use grouping (e.g., thousands) separators: `true` (default), `false`-->\\n\\n!! Returns\\n\\nA formatted number (string).\\n\\n!! Examples\\n\\n* Plain numbers:<div>\\n\\n```\\n<<number-format value:123456789>>\\n```\\n\\ngives\\n\\n> 123,456,789\\n</div>\\n\\n* Currency:<div>\\n\\n```\\n<<number-format value:123456789 style:currency>>\\n```\\n\\ngives\\n\\n> $123,456,789.00\\n</div>\\n\\n!! Tiddlers\\n\\n* [[$:/plugins/.dtn/utility-macros/js/NumberFormat.js]]: macro definition.\\n\"\n        }\n    }\n}"
}